<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>Christoff's Portfolio - Chess Game</title>
  <link rel="stylesheet" type="text/css" href="../Chess/chess.css" />
  <link rel="stylesheet" href="../a_styles.css" />
  <link rel="icon" href="../favicon.ico" type="image/x-icon" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <script src="../dark-mode.js" defer></script>
  <!-- Fallback dark mode button -->
  <button id="fallback-dark-mode" onclick="toggleDarkMode()" style="position: fixed; bottom: 20px; right: 20px; z-index: 1001; display: none; background: #007bff; color: white; border: none; padding: 10px; border-radius: 50%; width: 50px; height: 50px; cursor: pointer; font-size: 18px;">ðŸŒ™</button>
</head>
<body>
  <!-- ======= NAV BAR ======= -->
  <nav>
    <div class="nav-links" id="navLinks">
      <i class="fa fa-times" onclick="hideMenu()"></i>
      <ul>
        <li><a href="../index.html">HOME</a></li>
        <li><a href="../Projects.html">PROJECTS</a></li>
        <li><a href="../Gallery.html">GALLERY</a></li>
        <li><a href="../Services.html">SERVICES</a></li>
      </ul>
      <div class="mobile-social-links">
        <a href="mailto:christoffcowan10@gmail.com" class="social-link"><i class="fas fa-envelope"></i></a>
        <a href="https://github.com/toff-cowan" class="social-link" target="_blank"><i class="fab fa-github"></i></a>
        <a href="https://linkedin.com/in/christoff-cowan" class="social-link" target="_blank"><i class="fab fa-linkedin"></i></a>
      </div>
    </div>
    <i class="fa fa-bars" onclick="showMenu()"></i>
  </nav>

  <!-- ======= TITLE ======= -->
  <div class="chess-title">
    <h1>THE CHESS (beta)</h1>
  </div>

  <!-- ======= CHESS CONTENT WRAPPER ======= -->
  <div class="chess-content-wrapper">
    <!-- ======= BOARD CONTAINER ======= -->
    <div class="board-container">
    <!-- Mobile Timers on sides -->
    <div class="mobile-timer-left">
      <div class="player-timer mobile-timer" id="white-timer-mobile">05:00</div>
    </div>
    
    <div class="board-wrapper">
      <!-- Black timer above captured black pieces -->
      <div class="mobile-timer-top-card">
        <div class="player-timer mobile-timer-display" id="black-timer-card">05:00</div>
      </div>
      
      <!-- Captured by White (on top) -->
      <div id="capturedTop" class="captured-row">
        <div class="captured-title"></div>
        <div id="capturedByBlack" class="captured-list"></div>
      </div>

      <!-- Chess Board -->
      <div id="board" class="chessBoard">
      <!-- 8th Rank -->
      <div class="square white">
        <div class="piece rook" color="black"> 
          <img src="chesspieces/Black-Rook.png" alt="Black Rook" class="pieceImage">
        </div>
      </div>
      <div class="square black">
        <div class="piece knight" color="black">
          <img src="chesspieces/Black-Knight.png" alt="Black knight" class="pieceImage">
        </div>
      </div>
      <div class="square white">
        <div class="piece bishop" color="black">
          <img src="chesspieces/Black-Bishop.png" alt="Black bishop" class="pieceImage">
        </div>
      </div>
      <div class="square black">
        <div class="piece queen" color="black">
          <img src="chesspieces/Black-Queen.png" alt="Black queen" class="pieceImage">
        </div>
      </div>
      <div class="square white">
        <div class="piece king" color="black">
          <img src="chesspieces/Black-King.png" alt="Black King" class="pieceImage">
        </div>
      </div>
      <div class="square black">
        <div class="piece bishop" color="black">
          <img src="chesspieces/Black-Bishop.png" alt="Black bishop" class="pieceImage">
        </div>
      </div>
      <div class="square white">
        <div class="piece knight" color="black">
          <img src="chesspieces/Black-Knight.png" alt="Black knight" class="pieceImage">
        </div>
      </div>
      <div class="square black">
        <div class="coordinate rank whiteText">8</div>
        <div class="piece rook" color="black">
          <img src="chesspieces/Black-Rook.png" alt="Black Rook" class="pieceImage">
        </div>
      </div>

      <!-- 7th Rank (black pawns) -->
      <div class="square black"><div class="piece pawn" color="black"><img src="chesspieces/Black-Pawn.png" alt="Black Pawn" class="pieceImage"></div></div>
      <div class="square white"><div class="piece pawn" color="black"><img src="chesspieces/Black-Pawn.png" alt="Black Pawn" class="pieceImage"></div></div>
      <div class="square black"><div class="piece pawn" color="black"><img src="chesspieces/Black-Pawn.png" alt="Black Pawn" class="pieceImage"></div></div>
      <div class="square white"><div class="piece pawn" color="black"><img src="chesspieces/Black-Pawn.png" alt="Black Pawn" class="pieceImage"></div></div>
      <div class="square black"><div class="piece pawn" color="black"><img src="chesspieces/Black-Pawn.png" alt="Black Pawn" class="pieceImage"></div></div>
      <div class="square white"><div class="piece pawn" color="black"><img src="chesspieces/Black-Pawn.png" alt="Black Pawn" class="pieceImage"></div></div>
      <div class="square black"><div class="piece pawn" color="black"><img src="chesspieces/Black-Pawn.png" alt="Black Pawn" class="pieceImage"></div></div>
      <div class="square white">
        <div class="coordinate rank blackText">7</div>
        <div class="piece pawn" color="black"><img src="chesspieces/Black-Pawn.png" alt="Black Pawn" class="pieceImage"></div>
      </div>

      <!-- 6th -->
      <div class="square white"></div><div class="square black"></div><div class="square white"></div><div class="square black"></div>
      <div class="square white"></div><div class="square black"></div><div class="square white"></div>
      <div class="square black"><div class="coordinate rank whiteText">6</div></div>

      <!-- 5th -->
      <div class="square black"></div><div class="square white"></div><div class="square black"></div><div class="square white"></div>
      <div class="square black"></div><div class="square white"></div><div class="square black"></div>
      <div class="square white"><div class="coordinate rank blackText">5</div></div>

      <!-- 4th -->
      <div class="square white"></div><div class="square black"></div><div class="square white"></div><div class="square black"></div>
      <div class="square white"></div><div class="square black"></div><div class="square white"></div>
      <div class="square black"><div class="coordinate rank whiteText">4</div></div>

      <!-- 3rd -->
      <div class="square black"></div><div class="square white"></div><div class="square black"></div><div class="square white"></div>
      <div class="square black"></div><div class="square white"></div><div class="square black"></div>
      <div class="square white"><div class="coordinate rank blackText">3</div></div>

      <!-- 2nd (white pawns) -->
      <div class="square white"><div class="piece pawn" color="white"><img src="chesspieces/White-Pawn.png" alt="White Pawn" class="pieceImage"></div></div>
      <div class="square black"><div class="piece pawn" color="white"><img src="chesspieces/White-Pawn.png" alt="White Pawn" class="pieceImage"></div></div>
      <div class="square white"><div class="piece pawn" color="white"><img src="chesspieces/White-Pawn.png" alt="White Pawn" class="pieceImage"></div></div>
      <div class="square black"><div class="piece pawn" color="white"><img src="chesspieces/White-Pawn.png" alt="White Pawn" class="pieceImage"></div></div>
      <div class="square white"><div class="piece pawn" color="white"><img src="chesspieces/White-Pawn.png" alt="White Pawn" class="pieceImage"></div></div>
      <div class="square black"><div class="piece pawn" color="white"><img src="chesspieces/White-Pawn.png" alt="White Pawn" class="pieceImage"></div></div>
      <div class="square white"><div class="piece pawn" color="white"><img src="chesspieces/White-Pawn.png" alt="White Pawn" class="pieceImage"></div></div>
      <div class="square black">
        <div class="coordinate rank whiteText">2</div>
        <div class="piece pawn" color="white"><img src="chesspieces/White-Pawn.png" alt="White Pawn" class="pieceImage"></div>
      </div>

      <!-- 1st rank -->
      <div class="square black"><div class="coordinate whiteText">a</div><div class="piece rook" color="white"><img src="chesspieces/White-Rook.png" alt="White Rook" class="pieceImage"></div></div>
      <div class="square white"><div class="coordinate blackText">b</div><div class="piece knight" color="white"><img src="chesspieces/White-Knight.png" alt="White knight" class="pieceImage"></div></div>
      <div class="square black"><div class="coordinate whiteText">c</div><div class="piece bishop" color="white"><img src="chesspieces/White-Bishop.png" alt="White bishop" class="pieceImage"></div></div>
      <div class="square white"><div class="coordinate blackText">d</div><div class="piece queen" color="white"><img src="chesspieces/White-Queen.png" alt="White Queen" class="pieceImage"></div></div>

      <div class="square black"><div class="coordinate whiteText">e</div><div class="piece king" color="white"><img src="chesspieces/White-King.png" alt="White King" class="pieceImage"></div></div>
      <div class="square white"><div class="coordinate blackText">f</div><div class="piece bishop" color="white"><img src="chesspieces/White-Bishop.png" alt="White bishop" class="pieceImage"></div></div>
      <div class="square black"><div class="coordinate whiteText">g</div><div class="piece knight" color="white"><img src="chesspieces/White-Knight.png" alt="White knight" class="pieceImage"></div></div>
      <div class="square white">
        <div class="coordinate blackText">h</div>
        <div class="coordinate rank blackText">1</div>
        <div class="piece rook" color="white"><img src="chesspieces/White-Rook.png" alt="White Rook" class="pieceImage"></div>
      </div>
    </div>

      <!-- Captured by Black (on bottom) -->
      <div id="capturedBottom" class="captured-row">
        <div class="captured-title"></div>
        <div id="capturedByWhite" class="captured-list"></div>
      </div>
      
      <!-- White timer below captured white pieces -->
      <div class="mobile-timer-bottom-card">
        <div class="player-timer mobile-timer-display" id="white-timer-card">05:00</div>
      </div>
    </div>
    
    <div class="mobile-timer-right">
      <div class="player-timer mobile-timer" id="black-timer-mobile">05:00</div>
    </div>
  </div>

  <!-- promotion popup -->
  <div id="promotion-box" class="hidden absolute z-50 bg-white rounded-xl shadow-2xl p-3 flex flex-col gap-3 border border-gray-300">
    <div id="promotion-options" class="flex flex-col gap-2"></div>
  </div>

  <!-- ======= RIGHT MENU CARD (Desktop) ======= -->
  <aside id="menu-card" class="menu-card">
    <div class="menu-header">
      <h3>Game Menu</h3>
    </div>

    <!-- Time control selection -->
    <div class="time-control">
      <label for="timeSelect">Time Control</label>
      <select id="timeSelect">
        <option value="0">No Time</option>
        <option value="60">1:00</option>
        <option value="180">3:00</option>
        <option value="300" selected>5:00</option>
        <option value="600">10:00</option>
        <option value="1800">30:00</option>
      </select>
    </div>

    <!-- Start/Pause + loading spinner -->
    <div class="menu-row">
      <button id="resignBtn" class="btn danger">Resign</button>
    </div>
    
    <!-- Draw button -->
    <div class="menu-row">
      <button id="drawBtn" class="btn">Offer Draw</button>
    </div>
    
    <!-- New game button -->
    <div class="menu-row">
      <button id="newGameBtn" class="btn danger">New Game</button>
    </div>

    <!-- Previous move display -->
    <div class="previous-move">
      <div class="prev-icon">âŸ·</div>
      <div id="prevMoveText">No moves yet</div>
    </div>

    <!-- Timers displayed -->
    <div class="timers-compact">
      <div class="player-timer" id="black-timer">05:00</div>
      <div class="player-timer" id="white-timer">05:00</div>
    </div>

    <!-- Move list in menu -->
    <div class="move-list-header">Move History</div>
    <div class="move-list-container">
      <div id="moveList" class="move-list"></div>
    </div>
  </aside>


  <!-- ======= MOBILE BOTTOM RIBBON MENU ======= -->
  <div class="mobile-menu-ribbon">
    <div class="mobile-menu-main">
      <button id="resignBtnMobile" class="mobile-menu-btn" title="Resign">
        <i class="fas fa-flag"></i>
      </button>
      <button id="drawBtnMobile" class="mobile-menu-btn" title="Offer Draw">
        <i class="fas fa-handshake"></i>
      </button>
      <button id="newGameBtnMobile" class="mobile-menu-btn" title="New Game">
        <i class="fas fa-plus"></i>
      </button>
      <button id="timeControlBtnMobile" class="mobile-menu-btn" title="Time Control">
        <i class="fas fa-clock"></i>
      </button>
    </div>
    <div class="mobile-menu-moves">
      <div class="mobile-moves-nav">
        <button id="prevMoveBtn" class="mobile-nav-btn" title="Previous Move">
          <i class="fas fa-chevron-left"></i>
        </button>
        <div class="mobile-moves-header">Moves</div>
        <button id="nextMoveBtn" class="mobile-nav-btn" title="Next Move">
          <i class="fas fa-chevron-right"></i>
        </button>
      </div>
      <div class="mobile-moves-list" id="moveListMobile"></div>
    </div>
  </div>

  <!-- Mobile Time Control Modal -->
  <div id="mobileTimeModal" class="mobile-time-modal">
    <div class="mobile-time-modal-content">
      <h3>Time Control</h3>
      <select id="timeSelectMobile">
        <option value="0">No Time</option>
        <option value="60">1:00</option>
        <option value="180">3:00</option>
        <option value="300" selected>5:00</option>
        <option value="600">10:00</option>
        <option value="1800">30:00</option>
      </select>
      <button class="mobile-time-close">Close</button>
    </div>
  </div>
  </div>

  <!-- Optional alert -->
  <div id="alert" style="display:none"></div>

  <!-- JavaScript for mobile menu -->
  <script>
    // Mobile menu toggle
    const navLinks = document.getElementById("navLinks");
    
    // Function to show/hide dark mode button
    function toggleDarkModeButton(show) {
      const themeToggle = document.getElementById("theme-toggle");
      if (themeToggle) {
        if (show) {
          themeToggle.classList.add("show-with-sidebar");
        } else {
          themeToggle.classList.remove("show-with-sidebar");
        }
      }
    }
    
    function showMenu() {
      navLinks.style.right = "0";
      document.body.style.overflow = "hidden";
      
      // Show dark mode button when sidebar opens
      toggleDarkModeButton(true);
    }
    
    function hideMenu() {
      navLinks.style.right = "-300px";
      document.body.style.overflow = "auto";
      
      // Hide dark mode button when sidebar closes
      toggleDarkModeButton(false);
    }
    
    // Ensure dark mode button is hidden initially (in case it loads after page load)
    document.addEventListener('DOMContentLoaded', function() {
      toggleDarkModeButton(false);
    });
    
    // Also check after a delay in case dark-mode.js creates the button later
    setTimeout(function() {
      toggleDarkModeButton(false);
    }, 500);
  </script>

  <script src="Chess.js"></script>
</body>
</html>